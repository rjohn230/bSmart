/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { NgxPlaidLinkService } from './ngx-plaid-link.service';
/**
 * @record
 */
export function ICustomWindow() { }
/** @type {?} */
ICustomWindow.prototype.Plaid;
/**
 * @return {?}
 */
function getWindow() {
    return window;
}
var NgxPlaidLinkButtonComponent = /** @class */ (function () {
    function NgxPlaidLinkButtonComponent(plaidLinkLoader) {
        this.plaidLinkLoader = plaidLinkLoader;
        this.defaultProps = {
            apiVersion: 'v2',
            env: 'sandbox',
            institution: null,
            token: null,
            style: {
                'background-color': '#0085e4',
                'transition-duration': '350ms',
                'transition-property': 'background-color, box-shadow',
                'transition-timing-function': 'ease-in-out',
                '-webkit-appearance': 'button',
                'border': '0',
                'border-radius': '4px',
                'box-shadow': '0 2px 4px 0 rgba(0,0,0,0.1), inset 0 1px 0 0 rgba(255,255,255,0.1)',
                'color': '#fff',
                'font-size': '20px',
                'height': '56px',
                'outline': '0',
                'text-align': 'center',
                'text-transform': 'none',
                'padding': '0 2em',
                'cursor': 'pointer'
            },
            buttonText: 'Log In To Your Bank Account',
            webhook: '',
            product: ['auth'],
            className: 'plaid-link-button'
        };
        this.apiVersion = this.defaultProps.apiVersion;
        this.env = this.defaultProps.env;
        this.institution = this.defaultProps.institution;
        this.product = this.defaultProps.product;
        this.token = this.defaultProps.token;
        this.webhook = this.defaultProps.webhook;
        this.style = this.defaultProps.style;
        this.className = this.defaultProps.className;
        this.buttonText = this.defaultProps.buttonText;
        this.Event = new EventEmitter();
        this.Click = new EventEmitter();
        this.Load = new EventEmitter();
        this.Exit = new EventEmitter();
        this.Success = new EventEmitter();
        this.disabledButton = true;
    }
    Object.defineProperty(NgxPlaidLinkButtonComponent.prototype, "nativeWindow", {
        get: /**
         * @return {?}
         */
        function () {
            return getWindow();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgxPlaidLinkButtonComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        this.plaidLinkLoader.createPlaid({
            env: self.env,
            key: self.publicKey,
            product: self.product,
            apiVersion: 'v2',
            clientName: self.clientName,
            onSuccess: function (public_token, metadata) {
                self.onSuccess(public_token, metadata);
            },
            onExit: function (err, metadata) {
                self.onExit(err, metadata);
            },
            onEvent: function (eventName, metadata) {
                self.onEvent(eventName, metadata);
            },
            onLoad: function () {
                self.onLoad();
            },
            token: self.token || null,
            webhook: self.webhook || null
        }).then(function (handler) {
            _this.disabledButton = false;
            _this.plaidLinkHandler = handler;
        });
    };
    /**
     * @return {?}
     */
    NgxPlaidLinkButtonComponent.prototype.onScriptError = /**
     * @return {?}
     */
    function () {
        console.error('There was an issue loading the link-initialize.js script');
    };
    /**
     * @param {?} error
     * @param {?} metadata
     * @return {?}
     */
    NgxPlaidLinkButtonComponent.prototype.onExit = /**
     * @param {?} error
     * @param {?} metadata
     * @return {?}
     */
    function (error, metadata) {
        this.Exit.emit({
            error: error,
            metadata: metadata
        });
    };
    /**
     * @param {?} eventName
     * @param {?} metadata
     * @return {?}
     */
    NgxPlaidLinkButtonComponent.prototype.onEvent = /**
     * @param {?} eventName
     * @param {?} metadata
     * @return {?}
     */
    function (eventName, metadata) {
        this.Event.emit({
            eventName: eventName,
            metadata: metadata
        });
    };
    /**
     * @param {?} public_token
     * @param {?} metadata
     * @return {?}
     */
    NgxPlaidLinkButtonComponent.prototype.onSuccess = /**
     * @param {?} public_token
     * @param {?} metadata
     * @return {?}
     */
    function (public_token, metadata) {
        this.Success.emit({
            token: public_token,
            metadata: metadata
        });
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NgxPlaidLinkButtonComponent.prototype.onClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.Click.emit($event);
        /** @type {?} */
        var institution = this.institution || null;
        if (this.plaidLinkHandler) {
            this.plaidLinkHandler.open(institution);
        }
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    NgxPlaidLinkButtonComponent.prototype.onLoad = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        if ($event === void 0) { $event = 'link_loaded'; }
        this.Load.emit($event);
    };
    NgxPlaidLinkButtonComponent.decorators = [
        { type: Component, args: [{
                    selector: 'mr-ngx-plaid-link-button',
                    template: "\n    <button\n      (click)=\"onClick($event)\"\n      [class]=\"className\"\n      [disabled]=\"disabledButton\"\n      [ngStyle]=\"style\">\n      {{buttonText}}\n    </button>\n  ",
                    styles: []
                },] },
    ];
    /** @nocollapse */
    NgxPlaidLinkButtonComponent.ctorParameters = function () { return [
        { type: NgxPlaidLinkService }
    ]; };
    NgxPlaidLinkButtonComponent.propDecorators = {
        apiVersion: [{ type: Input }],
        clientName: [{ type: Input }],
        env: [{ type: Input }],
        institution: [{ type: Input }],
        publicKey: [{ type: Input }],
        product: [{ type: Input }],
        token: [{ type: Input }],
        webhook: [{ type: Input }],
        style: [{ type: Input }],
        className: [{ type: Input }],
        buttonText: [{ type: Input }],
        Event: [{ type: Output }],
        Click: [{ type: Output }],
        Load: [{ type: Output }],
        Exit: [{ type: Output }],
        Success: [{ type: Output }]
    };
    return NgxPlaidLinkButtonComponent;
}());
export { NgxPlaidLinkButtonComponent };
if (false) {
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.plaidLinkHandler;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.defaultProps;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.disabledButton;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.apiVersion;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.clientName;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.env;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.institution;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.publicKey;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.product;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.token;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.webhook;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.style;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.className;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.buttonText;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.Event;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.Click;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.Load;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.Exit;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.Success;
    /** @type {?} */
    NgxPlaidLinkButtonComponent.prototype.plaidLinkLoader;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXBsYWlkLWxpbmstYnV0dG9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1wbGFpZC1saW5rLyIsInNvdXJjZXMiOlsibGliL25neC1wbGFpZC1saW5rLWJ1dHRvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBV3RGLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDOzs7Ozs7Ozs7O0FBUy9EO0lBQ0UsTUFBTSxDQUFDLE1BQU0sQ0FBQztDQUNmOztJQXdFQyxxQ0FBb0IsZUFBb0M7UUFBcEMsb0JBQWUsR0FBZixlQUFlLENBQXFCOzRCQXJEakM7WUFDckIsVUFBVSxFQUFFLElBQUk7WUFDaEIsR0FBRyxFQUFFLFNBQVM7WUFDZCxXQUFXLEVBQUUsSUFBSTtZQUNqQixLQUFLLEVBQUUsSUFBSTtZQUNYLEtBQUssRUFBRTtnQkFDTCxrQkFBa0IsRUFBRSxTQUFTO2dCQUM3QixxQkFBcUIsRUFBRSxPQUFPO2dCQUM5QixxQkFBcUIsRUFBRSw4QkFBOEI7Z0JBQ3JELDRCQUE0QixFQUFFLGFBQWE7Z0JBQzNDLG9CQUFvQixFQUFFLFFBQVE7Z0JBQzlCLFFBQVEsRUFBRSxHQUFHO2dCQUNiLGVBQWUsRUFBRSxLQUFLO2dCQUN0QixZQUFZLEVBQUUsb0VBQW9FO2dCQUNsRixPQUFPLEVBQUUsTUFBTTtnQkFDZixXQUFXLEVBQUUsTUFBTTtnQkFDbkIsUUFBUSxFQUFFLE1BQU07Z0JBQ2hCLFNBQVMsRUFBRSxHQUFHO2dCQUNkLFlBQVksRUFBRSxRQUFRO2dCQUN0QixnQkFBZ0IsRUFBRSxNQUFNO2dCQUN4QixTQUFTLEVBQUUsT0FBTztnQkFDbEIsUUFBUSxFQUFFLFNBQVM7YUFDcEI7WUFDRCxVQUFVLEVBQUUsNkJBQTZCO1lBQ3pDLE9BQU8sRUFBRSxFQUFF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QUFRLEVBQUUsUUFBUTtTQUNuQixDQUFDLENBQUM7Ozs7OztJQUdMLDZDQUFPOzs7O0lBQVAsVUFBUSxNQUFNO1FBQ1osSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7O1FBRXhCLElBQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDO1FBQzdDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUN6QztLQUNGOzs7OztJQUVNLDRDQUFNOzs7O2NBQUMsTUFBc0I7UUFBdEIsdUJBQUEsRUFBQSxzQkFBc0I7UUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7OztnQkF6STFCLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQyxRQUFRLEVBQUUseUxBUVQ7b0JBQ0QsTUFBTSxFQUFFLEVBQUU7aUJBQ1g7Ozs7Z0JBekJRLG1CQUFtQjs7OzZCQTZEekIsS0FBSzs2QkFDTCxLQUFLO3NCQUNMLEtBQUs7OEJBQ0wsS0FBSzs0QkFDTCxLQUFLOzBCQUNMLEtBQUs7d0JBQ0wsS0FBSzswQkFDTCxLQUFLO3dCQUNMLEtBQUs7NEJBQ0wsS0FBSzs2QkFDTCxLQUFLO3dCQUVMLE1BQU07d0JBQ04sTUFBTTt1QkFDTixNQUFNO3VCQUNOLE1BQU07MEJBQ04sTUFBTTs7c0NBeEZUOztTQXFDYSwyQkFBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgUGxhaWRFcnJvck1ldGFkYXRhLFxuICBQbGFpZEVycm9yT2JqZWN0LFxuICBQbGFpZEV2ZW50TWV0YWRhdGEsXG4gIFBsYWlkT25FdmVudEFyZ3MsXG4gIFBsYWlkT25FeGl0QXJncyxcbiAgUGxhaWRPblN1Y2Nlc3NBcmdzLFxuICBQbGFpZFN1Y2Nlc3NNZXRhZGF0YSxcbiAgUGxhaWRDb25maWdcbn0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IE5neFBsYWlkTGlua1NlcnZpY2UgfSBmcm9tICcuL25neC1wbGFpZC1saW5rLnNlcnZpY2UnO1xuaW1wb3J0IHsgUGxhaWRMaW5rSGFuZGxlciB9IGZyb20gJy4vbmd4LXBsYWlkLWxpbmstaGFuZGxlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUN1c3RvbVdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gIFBsYWlkOiB7XG4gICAgY3JlYXRlOiBGdW5jdGlvbjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0V2luZG93KCk6IGFueSB7XG4gIHJldHVybiB3aW5kb3c7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ21yLW5neC1wbGFpZC1saW5rLWJ1dHRvbicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGJ1dHRvblxuICAgICAgKGNsaWNrKT1cIm9uQ2xpY2soJGV2ZW50KVwiXG4gICAgICBbY2xhc3NdPVwiY2xhc3NOYW1lXCJcbiAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZEJ1dHRvblwiXG4gICAgICBbbmdTdHlsZV09XCJzdHlsZVwiPlxuICAgICAge3tidXR0b25UZXh0fX1cbiAgICA8L2J1dHRvbj5cbiAgYCxcbiAgc3R5bGVzOiBbXVxufSlcbmV4cG9ydCBjbGFzcyBOZ3hQbGFpZExpbmtCdXR0b25Db21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0IHtcblxuICBwcml2YXRlIHBsYWlkTGlua0hhbmRsZXI6IFBsYWlkTGlua0hhbmRsZXI7XG5cbiAgcHJpdmF0ZSBkZWZhdWx0UHJvcHMgPSB7XG4gICAgYXBpVmVyc2lvbjogJ3YyJyxcbiAgICBlbnY6ICdzYW5kYm94JyxcbiAgICBpbnN0aXR1dGlvbjogbnVsbCxcbiAgICB0b2tlbjogbnVsbCxcbiAgICBzdHlsZToge1xuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAnIzAwODVlNCcsXG4gICAgICAndHJhbnNpdGlvbi1kdXJhdGlvbic6ICczNTBtcycsXG4gICAgICAndHJhbnNpdGlvbi1wcm9wZXJ0eSc6ICdiYWNrZ3JvdW5kLWNvbG9yLCBib3gtc2hhZG93JyxcbiAgICAgICd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbic6ICdlYXNlLWluLW91dCcsXG4gICAgICAnLXdlYmtpdC1hcHBlYXJhbmNlJzogJ2J1dHRvbicsXG4gICAgICAnYm9yZGVyJzogJzAnLFxuICAgICAgJ2JvcmRlci1yYWRpdXMnOiAnNHB4JyxcbiAgICAgICdib3gtc2hhZG93JzogJzAgMnB4IDRweCAwIHJnYmEoMCwwLDAsMC4xKSwgaW5zZXQgMCAxcHggMCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4xKScsXG4gICAgICAnY29sb3InOiAnI2ZmZicsXG4gICAgICAnZm9udC1zaXplJzogJzIwcHgnLFxuICAgICAgJ2hlaWdodCc6ICc1NnB4JyxcbiAgICAgICdvdXRsaW5lJzogJzAnLFxuICAgICAgJ3RleHQtYWxpZ24nOiAnY2VudGVyJyxcbiAgICAgICd0ZXh0LXRyYW5zZm9ybSc6ICdub25lJyxcbiAgICAgICdwYWRkaW5nJzogJzAgMmVtJyxcbiAgICAgICdjdXJzb3InOiAncG9pbnRlcidcbiAgICB9LFxuICAgIGJ1dHRvblRleHQ6ICdMb2cgSW4gVG8gWW91ciBCYW5rIEFjY291bnQnLFxuICAgIHdlYmhvb2s6ICcnLFxuICAgIHByb2R1Y3Q6IFsnYXV0aCddLFxuICAgIGNsYXNzTmFtZTogJ3BsYWlkLWxpbmstYnV0dG9uJ1xuICB9O1xuXG4gIGRpc2FibGVkQnV0dG9uOiBib29sZWFuO1xuXG4gIEBJbnB1dCgpIGFwaVZlcnNpb24/OiBzdHJpbmcgPSB0aGlzLmRlZmF1bHRQcm9wcy5hcGlWZXJzaW9uO1xuICBASW5wdXQoKSBjbGllbnROYW1lOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGVudj86IHN0cmluZyA9IHRoaXMuZGVmYXVsdFByb3BzLmVudjtcbiAgQElucHV0KCkgaW5zdGl0dXRpb24/OiBzdHJpbmcgPSB0aGlzLmRlZmF1bHRQcm9wcy5pbnN0aXR1dGlvbjtcbiAgQElucHV0KCkgcHVibGljS2V5OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHByb2R1Y3Q/OiBBcnJheTxzdHJpbmc+ID0gdGhpcy5kZWZhdWx0UHJvcHMucHJvZHVjdDtcbiAgQElucHV0KCkgdG9rZW4/OiBzdHJpbmcgPSB0aGlzLmRlZmF1bHRQcm9wcy50b2tlbjtcbiAgQElucHV0KCkgd2ViaG9vaz86IHN0cmluZyA9IHRoaXMuZGVmYXVsdFByb3BzLndlYmhvb2s7XG4gIEBJbnB1dCgpIHN0eWxlPzogYW55ID0gdGhpcy5kZWZhdWx0UHJvcHMuc3R5bGU7XG4gIEBJbnB1dCgpIGNsYXNzTmFtZT86IHN0cmluZyA9IHRoaXMuZGVmYXVsdFByb3BzLmNsYXNzTmFtZTtcbiAgQElucHV0KCkgYnV0dG9uVGV4dD86IHN0cmluZyA9IHRoaXMuZGVmYXVsdFByb3BzLmJ1dHRvblRleHQ7XG5cbiAgQE91dHB1dCgpIEV2ZW50OiBFdmVudEVtaXR0ZXI8UGxhaWRPbkV2ZW50QXJncz4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBDbGljazogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBMb2FkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIEV4aXQ6IEV2ZW50RW1pdHRlcjxQbGFpZE9uRXhpdEFyZ3M+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgU3VjY2VzczogRXZlbnRFbWl0dGVyPFBsYWlkT25TdWNjZXNzQXJncz4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgZ2V0IG5hdGl2ZVdpbmRvdygpOiBJQ3VzdG9tV2luZG93IHtcbiAgICByZXR1cm4gZ2V0V2luZG93KCk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsYWlkTGlua0xvYWRlcjogTmd4UGxhaWRMaW5rU2VydmljZSkge1xuICAgIHRoaXMuZGlzYWJsZWRCdXR0b24gPSB0cnVlO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGxhaWRMaW5rTG9hZGVyLmNyZWF0ZVBsYWlkKHtcbiAgICAgIGVudjogc2VsZi5lbnYsXG4gICAgICBrZXk6IHNlbGYucHVibGljS2V5LFxuICAgICAgcHJvZHVjdDogc2VsZi5wcm9kdWN0LFxuICAgICAgYXBpVmVyc2lvbjogJ3YyJyxcbiAgICAgIGNsaWVudE5hbWU6IHNlbGYuY2xpZW50TmFtZSxcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gKHB1YmxpY190b2tlbiwgbWV0YWRhdGEpIHtcbiAgICAgICAgc2VsZi5vblN1Y2Nlc3MocHVibGljX3Rva2VuLCBtZXRhZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25FeGl0OiBmdW5jdGlvbiAoZXJyLCBtZXRhZGF0YSkge1xuICAgICAgICBzZWxmLm9uRXhpdChlcnIsIG1ldGFkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbkV2ZW50OiBmdW5jdGlvbiAoZXZlbnROYW1lLCBtZXRhZGF0YSkge1xuICAgICAgICBzZWxmLm9uRXZlbnQoZXZlbnROYW1lLCBtZXRhZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYub25Mb2FkKCk7XG4gICAgICB9LFxuICAgICAgdG9rZW46IHNlbGYudG9rZW4gfHwgbnVsbCxcbiAgICAgIHdlYmhvb2s6IHNlbGYud2ViaG9vayB8fCBudWxsXG4gICAgfSkudGhlbigoaGFuZGxlcjogUGxhaWRMaW5rSGFuZGxlcikgPT4ge1xuICAgICAgdGhpcy5kaXNhYmxlZEJ1dHRvbiA9IGZhbHNlO1xuICAgICAgdGhpcy5wbGFpZExpbmtIYW5kbGVyID0gaGFuZGxlcjtcbiAgICB9KTtcbiAgfVxuXG4gIG9uU2NyaXB0RXJyb3IoKSB7XG4gICAgY29uc29sZS5lcnJvcignVGhlcmUgd2FzIGFuIGlzc3VlIGxvYWRpbmcgdGhlIGxpbmstaW5pdGlhbGl6ZS5qcyBzY3JpcHQnKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkV4aXQoZXJyb3I6IFBsYWlkRXJyb3JPYmplY3QsIG1ldGFkYXRhOiBQbGFpZEVycm9yTWV0YWRhdGEpIHtcbiAgICB0aGlzLkV4aXQuZW1pdCh7XG4gICAgICBlcnJvcjogZXJyb3IsXG4gICAgICBtZXRhZGF0YTogbWV0YWRhdGFcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBvbkV2ZW50KGV2ZW50TmFtZTogc3RyaW5nLCBtZXRhZGF0YTogUGxhaWRFdmVudE1ldGFkYXRhKSB7XG4gICAgdGhpcy5FdmVudC5lbWl0KHtcbiAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLFxuICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25TdWNjZXNzKHB1YmxpY190b2tlbjogc3RyaW5nLCBtZXRhZGF0YTogUGxhaWRTdWNjZXNzTWV0YWRhdGEpIHtcbiAgICB0aGlzLlN1Y2Nlc3MuZW1pdCh7XG4gICAgICB0b2tlbjogcHVibGljX3Rva2VuLFxuICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhXG4gICAgfSk7XG4gIH1cblxuICBvbkNsaWNrKCRldmVudCkge1xuICAgIHRoaXMuQ2xpY2suZW1pdCgkZXZlbnQpO1xuICAgIC8vIE9wZW4gdG8gYSBzcGVjaWZpYyBpbnN0aXR1dGlvbiBpZiBuZWNlc3Nhcnk7XG4gICAgY29uc3QgaW5zdGl0dXRpb24gPSB0aGlzLmluc3RpdHV0aW9uIHx8IG51bGw7XG4gICAgaWYgKHRoaXMucGxhaWRMaW5rSGFuZGxlcikge1xuICAgICAgdGhpcy5wbGFpZExpbmtIYW5kbGVyLm9wZW4oaW5zdGl0dXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkxvYWQoJGV2ZW50ID0gJ2xpbmtfbG9hZGVkJykge1xuICAgIHRoaXMuTG9hZC5lbWl0KCRldmVudCk7XG4gIH1cblxufVxuIl19