{"version":3,"file":"ngx-plaid-link.js.map","sources":["ng://ngx-plaid-link/lib/ngx-plaid-link-handler.ts","ng://ngx-plaid-link/lib/ngx-plaid-link.service.ts","ng://ngx-plaid-link/lib/ngx-plaid-link-button.component.ts","ng://ngx-plaid-link/lib/ngx-plaid-link.module.ts"],"sourcesContent":["import { PlaidConfig } from './interfaces';\n\ndeclare let Plaid: any;\n\nexport class PlaidLinkHandler {\n\n  /**\n   * Holds the Plaid Link instance.\n   */\n  private plaidLink: any;\n\n  /**\n   * Constructor configures the Plaid Link handler with given config options.\n   * @param PlaidConfig config\n   */\n  constructor(config: PlaidConfig) {\n    this.plaidLink = Plaid.create(config);\n  }\n\n  /**\n   * Open the Plaid Link window for this handler.\n   * @param string institution The name of the institution to open\n   */\n  public open(institution?: string): void {\n    this.plaidLink.open(institution);\n  }\n\n  /**\n   * Closes the currently open Plaid Link window if any.\n   */\n  public exit(): void {\n    this.plaidLink.exit();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { PlaidConfig } from './interfaces';\nimport { PlaidLinkHandler } from './ngx-plaid-link-handler';\n\n@Injectable()\nexport class NgxPlaidLinkService {\n\n  private loaded: Promise<void>;\n\n  constructor() { }\n\n  /**\n   * Create a Plaid Link instance as soon as Plaid Link has loaded.\n   * @param PlaidConfig config\n   * @returns Promise<PlaidLinkHandler>\n   */\n  public createPlaid(config: PlaidConfig): Promise<PlaidLinkHandler> {\n    return this.loadPlaid().then(() => {\n      return new PlaidLinkHandler(config);\n    });\n  }\n\n  /**\n   * Load or wait for the Plaid Link library to load.\n   * @returns Promise<void>\n   */\n  public loadPlaid(): Promise<void> {\n    if (!this.loaded) {\n      this.loaded = new Promise<void>((resolve, reject) => {\n        const script: any = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = 'https://cdn.plaid.com/link/v2/stable/link-initialize.js';\n        script.onerror = (e: any) => reject(e);\n        if (script.readyState) {\n          script.onreadystatechange = () => {\n            if (script.readyState === 'loaded' || script.readyState === 'complete') {\n              script.onreadystatechange = null;\n              resolve();\n            }\n          };\n        } else {\n          script.onload = () => {\n            resolve();\n          };\n        }\n        document.getElementsByTagName('body')[0].appendChild(script);\n      });\n    }\n\n    return this.loaded;\n  }\n\n}\n","import { Component, Input, Output, EventEmitter, AfterViewInit } from '@angular/core';\nimport {\n  PlaidErrorMetadata,\n  PlaidErrorObject,\n  PlaidEventMetadata,\n  PlaidOnEventArgs,\n  PlaidOnExitArgs,\n  PlaidOnSuccessArgs,\n  PlaidSuccessMetadata,\n  PlaidConfig\n} from './interfaces';\nimport { NgxPlaidLinkService } from './ngx-plaid-link.service';\nimport { PlaidLinkHandler } from './ngx-plaid-link-handler';\n\nexport interface ICustomWindow extends Window {\n  Plaid: {\n    create: Function;\n  };\n}\n\nfunction getWindow(): any {\n  return window;\n}\n\n@Component({\n  selector: 'mr-ngx-plaid-link-button',\n  template: `\n    <button\n      (click)=\"onClick($event)\"\n      [class]=\"className\"\n      [disabled]=\"disabledButton\"\n      [ngStyle]=\"style\">\n      {{buttonText}}\n    </button>\n  `,\n  styles: []\n})\nexport class NgxPlaidLinkButtonComponent implements AfterViewInit {\n\n  private plaidLinkHandler: PlaidLinkHandler;\n\n  private defaultProps = {\n    apiVersion: 'v2',\n    env: 'sandbox',\n    institution: null,\n    token: null,\n    style: {\n      'background-color': '#0085e4',\n      'transition-duration': '350ms',\n      'transition-property': 'background-color, box-shadow',\n      'transition-timing-function': 'ease-in-out',\n      '-webkit-appearance': 'button',\n      'border': '0',\n      'border-radius': '4px',\n      'box-shadow': '0 2px 4px 0 rgba(0,0,0,0.1), inset 0 1px 0 0 rgba(255,255,255,0.1)',\n      'color': '#fff',\n      'font-size': '20px',\n      'height': '56px',\n      'outline': '0',\n      'text-align': 'center',\n      'text-transform': 'none',\n      'padding': '0 2em',\n      'cursor': 'pointer'\n    },\n    buttonText: 'Log In To Your Bank Account',\n    webhook: '',\n    product: ['auth'],\n    className: 'plaid-link-button'\n  };\n\n  disabledButton: boolean;\n\n  @Input() apiVersion?: string = this.defaultProps.apiVersion;\n  @Input() clientName: string;\n  @Input() env?: string = this.defaultProps.env;\n  @Input() institution?: string = this.defaultProps.institution;\n  @Input() publicKey: string;\n  @Input() product?: Array<string> = this.defaultProps.product;\n  @Input() token?: string = this.defaultProps.token;\n  @Input() webhook?: string = this.defaultProps.webhook;\n  @Input() style?: any = this.defaultProps.style;\n  @Input() className?: string = this.defaultProps.className;\n  @Input() buttonText?: string = this.defaultProps.buttonText;\n\n  @Output() Event: EventEmitter<PlaidOnEventArgs> = new EventEmitter();\n  @Output() Click: EventEmitter<any> = new EventEmitter();\n  @Output() Load: EventEmitter<any> = new EventEmitter();\n  @Output() Exit: EventEmitter<PlaidOnExitArgs> = new EventEmitter();\n  @Output() Success: EventEmitter<PlaidOnSuccessArgs> = new EventEmitter();\n\n  get nativeWindow(): ICustomWindow {\n    return getWindow();\n  }\n\n  constructor(private plaidLinkLoader: NgxPlaidLinkService) {\n    this.disabledButton = true;\n  }\n\n  ngAfterViewInit() {\n    const self = this;\n    this.plaidLinkLoader.createPlaid({\n      env: self.env,\n      key: self.publicKey,\n      product: self.product,\n      apiVersion: 'v2',\n      clientName: self.clientName,\n      onSuccess: function (public_token, metadata) {\n        self.onSuccess(public_token, metadata);\n      },\n      onExit: function (err, metadata) {\n        self.onExit(err, metadata);\n      },\n      onEvent: function (eventName, metadata) {\n        self.onEvent(eventName, metadata);\n      },\n      onLoad: function () {\n        self.onLoad();\n      },\n      token: self.token || null,\n      webhook: self.webhook || null\n    }).then((handler: PlaidLinkHandler) => {\n      this.disabledButton = false;\n      this.plaidLinkHandler = handler;\n    });\n  }\n\n  onScriptError() {\n    console.error('There was an issue loading the link-initialize.js script');\n  }\n\n  public onExit(error: PlaidErrorObject, metadata: PlaidErrorMetadata) {\n    this.Exit.emit({\n      error: error,\n      metadata: metadata\n    });\n  }\n\n  public onEvent(eventName: string, metadata: PlaidEventMetadata) {\n    this.Event.emit({\n      eventName: eventName,\n      metadata: metadata\n    });\n  }\n\n  public onSuccess(public_token: string, metadata: PlaidSuccessMetadata) {\n    this.Success.emit({\n      token: public_token,\n      metadata: metadata\n    });\n  }\n\n  onClick($event) {\n    this.Click.emit($event);\n    // Open to a specific institution if necessary;\n    const institution = this.institution || null;\n    if (this.plaidLinkHandler) {\n      this.plaidLinkHandler.open(institution);\n    }\n  }\n\n  public onLoad($event = 'link_loaded') {\n    this.Load.emit($event);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxPlaidLinkButtonComponent } from './ngx-plaid-link-button.component';\nimport { NgxPlaidLinkService } from './ngx-plaid-link.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  providers: [\n    NgxPlaidLinkService\n  ],\n  declarations: [NgxPlaidLinkButtonComponent],\n  exports: [NgxPlaidLinkButtonComponent]\n})\nexport class NgxPlaidLinkModule { }\n"],"names":[],"mappings":"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"}
